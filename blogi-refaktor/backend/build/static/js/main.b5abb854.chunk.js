(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{24:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(18),c=n.n(a),o=n(1),i=n.n(o),u=n(4),s=n(3),l=(n(24),n(6)),b=n.n(l),d="/api/blogs",j=null,p=function(){var e=Object(u.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:j}},e.next=3,b.a.post(d,t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(u.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:j}},e.next=3,b.a.delete("".concat(d,"/").concat(t.id),n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(u.a)(i.a.mark((function e(t){var n,r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:j}},r={user:t.user,likes:t.likes+1,author:t.author,title:t.title,url:t.url},e.next=4,b.a.put("".concat(d,"/").concat(t.id),r,n);case 4:return a=e.sent,e.abrupt("return",a.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h={getAll:function(){return b.a.get(d).then((function(e){return e.data}))},setToken:function(e){j="bearer ".concat(e)},create:p,likeBlog:g,deleteBlog:x},f=n(0),O=function(e){var t=e.blog,n=e.toggleMoreInfo,r=e.setBlogLiked,a=e.liked,c=e.deleteBlog,o={backgroundImage:"none",backgroundColor:"#F0F3F6",width:"8px",height:"24px",margin:"0px",padding:"0px"},s=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.likeBlog(t);case 2:return e.next=4,r();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{style:{marginTop:"16px"},children:[Object(f.jsx)("b",{children:"Url:"})," ",t.url,Object(f.jsx)("br",{}),Object(f.jsx)("b",{children:"Likes:"})," ",t.likes,Object(f.jsx)("br",{}),Object(f.jsx)("b",{children:"User:"})," ",t.user.name,!1===a?Object(f.jsx)("button",{style:o,onClick:s,children:"\ud83d\udc4d"}):Object(f.jsxs)("div",{style:{color:"green"},children:[Object(f.jsx)("br",{}),"Blog liked :)"]}),Object(f.jsx)("br",{}),Object(f.jsx)("button",{style:{margin:"0px",padding:"0px",backgroundImage:"none",backgroundColor:"F0F3F6",color:"red",width:"5px",fontSize:"0.9em",marginBottom:"16px"},onClick:c,children:"delete blog?"})," ",Object(f.jsx)("br",{}),Object(f.jsx)("button",{type:"text",style:{height:"32px",fontSize:"0.8em",padding:"0",backgroundColor:"#F0F3F6",backgroundImage:"none",color:"#203F5E",margin:"0px"},onClick:n,children:"Hide"})]})},v=function(e){var t=e.blog,n=e.updateBlog,a=Object(r.useState)(!1),c=Object(s.a)(a,2),o=c[0],l=c[1],b=Object(r.useState)(!1),d=Object(s.a)(b,2),j=d[0],p=d[1],x=function(){l(!o)},g=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.next=3,n();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v={height:"32px",fontSize:"0.8em",padding:"0",backgroundColor:"#F0F3F6",backgroundImage:"none",color:"#203F5E",margin:"0px"},m=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Do you want to remove ".concat(t.title," by ").concat(t.author))){e.next=5;break}return e.next=3,h.deleteBlog(t);case 3:return e.next=5,n();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{style:{marginBottom:"16px",borderBottom:"1px solid #203F5E",borderRadius:"8px"},children:[Object(f.jsx)("b",{children:t.title})," by ",Object(f.jsx)("i",{children:t.author})," ",Object(f.jsx)("br",{}),!0===o?O({blog:t,toggleMoreInfo:x,setBlogLiked:g,liked:j,deleteBlog:m}):Object(f.jsx)("button",{type:"text",style:v,onClick:x,children:"View"})]})},m=function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w={login:m},k=function(e){return""===e.text?null:Object(f.jsx)("div",{id:"warning",children:e.text})},y=function(e){return""===e.text?null:Object(f.jsx)("div",{id:"notification",children:e.text})},S=function(e){var t=e.create,n=Object(r.useState)(""),a=Object(s.a)(n,2),c=a[0],o=a[1],i=Object(r.useState)(""),u=Object(s.a)(i,2),l=u[0],b=u[1],d=Object(r.useState)(""),j=Object(s.a)(d,2),p=j[0],x=j[1];return Object(f.jsxs)("div",{id:"create_new_blog",children:[Object(f.jsx)("h2",{children:"Create new "}),Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t({title:c,author:l,url:p}),o(""),b(""),x("")},children:[Object(f.jsxs)("div",{children:["title",Object(f.jsx)("input",{type:"text",name:"Title",value:c,onChange:function(e){var t=e.target;return o(t.value)}})]}),Object(f.jsxs)("div",{children:["author",Object(f.jsx)("input",{type:"text",name:"Author",value:l,onChange:function(e){var t=e.target;return b(t.value)}})]}),Object(f.jsxs)("div",{children:["url",Object(f.jsx)("input",{type:"text",name:"Url",value:p,onChange:function(e){var t=e.target;return x(t.value)}})]}),Object(f.jsx)("button",{type:"submit",children:"Create"})]})]})},B=function(e){var t=Object(r.useState)(!1),n=Object(s.a)(t,2),a=n[0],c=n[1],o={display:a?"none":""},i={display:a?"":"none"},u=function(){c(!a)};return Object(f.jsxs)("div",{className:"Toggable",children:[Object(f.jsx)("div",{style:o,children:Object(f.jsx)("button",{className:"Toggable_Button",onClick:u,children:e.labelShow})}),Object(f.jsxs)("div",{style:i,children:[Object(f.jsx)("button",{className:"Toggable_Button",onClick:u,children:e.labelHide}),e.children]})]})};var C=function(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),o=Object(s.a)(c,2),l=o[0],b=o[1],d=Object(r.useState)(""),j=Object(s.a)(d,2),p=j[0],x=j[1],g=Object(r.useState)(null),O=Object(s.a)(g,2),m=O[0],C=O[1],F=Object(r.useState)(""),I=Object(s.a)(F,2),T=I[0],L=I[1],A=Object(r.useState)(""),U=Object(s.a)(A,2),z=U[0],N=U[1];Object(r.useEffect)((function(){var e=window.localStorage.getItem("loggedInBlogUser");if(e){var t=JSON.parse(e);C(t),h.setToken(t.token)}E()}),[]);var E=function(){h.getAll().then((function(e){e.sort((function(e,t){return t.likes-e.likes})),a(e)}))},H=function(e){L(e),setTimeout((function(){L("")}),5e3)},J=function(e){N(e),setTimeout((function(){N("")}),5e3)},P=function(){var e=Object(u.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,n={username:l,password:p},e.next=5,w.login(n);case 5:r=e.sent,C(r),x(""),b(""),h.setToken(r.token),window.localStorage.setItem("loggedInBlogUser",JSON.stringify(r)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),J("Invalid username or password");case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C(null),x(""),b(""),window.localStorage.removeItem("loggedInBlogUser"),H("Logged out successfully");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.create(t);case 3:E(),H("A new blog ".concat(t.title," by ").concat(t.author," has been added.")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),J("Please input valid information only"),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{id:"wrapper",children:[Object(f.jsx)("h1",{children:"Blogs by Hannu Korvala"}),Object(f.jsx)(y,{text:T}),Object(f.jsx)(k,{text:z}),null===m?Object(f.jsxs)("div",{id:"loginPrompt",children:[Object(f.jsx)("h2",{children:"Please login to view posts:"}),Object(f.jsxs)("form",{onSubmit:P,children:[Object(f.jsxs)("div",{children:["username ",Object(f.jsx)("input",{type:"text",name:"Username",value:l,onChange:function(e){var t=e.target;return b(t.value)}})]}),Object(f.jsxs)("div",{children:["password ",Object(f.jsx)("input",{type:"password",name:"Password",value:p,onChange:function(e){var t=e.target;return x(t.value)}})]}),Object(f.jsx)("button",{type:"submit",children:"login"})]})]}):[Object(f.jsx)(B,{labelShow:"Add a new blog",labelHide:"Cancel",children:Object(f.jsx)(S,{create:D},"createnewblog")},"toggableNewBlog"),Object(f.jsxs)("div",{children:[Object(f.jsx)("h3",{children:"List of current blogs"}),n.map((function(e){return Object(f.jsx)(v,{blog:e,updateBlog:E},e.id)}))]},"drawBlogList"),Object(f.jsxs)("div",{children:["Logged in as ",m.username,Object(f.jsx)("form",{onSubmit:_,children:Object(f.jsx)("button",{type:"submit",children:"Logout"})})]},"drawLogoutForm")]]})};c.a.render(Object(f.jsx)(C,{}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.b5abb854.chunk.js.map